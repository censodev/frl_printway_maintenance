(this.webpackJsonppgc_admin_dev=this.webpackJsonppgc_admin_dev||[]).push([[29],{515:function(t,e,a){"use strict";e.a=function(t){return(t||"").split("").map((function(t,e){return 0===e?t.toUpperCase():"_"===t?" ":t.toLowerCase()})).join("")}},547:function(t,e){},726:function(t,e,a){t.exports={text:"text--kTMKm",icon:"icon--U9cR4",grid:"grid--39Ddp",item:"item--1Tnjz",amount:"amount--38whh",box:"box--3teFi"}},757:function(t,e,a){"use strict";a.r(e);var n=a(192),o=a(269),r=(a(166),a(98)),l=(a(167),a(71)),c=(a(191),a(50)),i=(a(509),a(510)),s=a(79),u=a(80),d=a(82),p=a(81),f=(a(268),a(130)),m=(a(530),a(532)),h=(a(194),a(91)),g=(a(197),a(132)),b=(a(131),a(54)),S=a(0),y=a.n(S),E=a(503),P=a(504),v=a(555),C=a(534),T=a(739),x=a(90),D=a(12),O=a(3),N=a.n(O),k=a(31),F=a.n(k),B=a(551),L=a(726),w=a.n(L),R={legend:{display:!0,position:"bottom",align:"start",labels:{boxWidth:9,usePointStyle:!0,fontFamily:"Poppins-Medium"}},cutoutPercentage:70,tooltips:{callbacks:{label:function(t,e){var a=e.datasets[t.datasetIndex],n=a._meta[Object.keys(a._meta)[0]].total,o=a.data[t.index];return o+" ("+parseFloat((o/n*100).toFixed(1))+"%)"},title:function(t,e){return e.labels[t[0].index]}}}},M=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.topProductType,a=t.topProduct,n=e&&e.productTypes&&e.productTypes.map((function(t){return t.value})).reduce((function(t,e){return t+e}),0),o=a&&a.products&&a.products.map((function(t){return t.value})).reduce((function(t,e){return t+e}),0),r={labels:a&&a.products&&a.products.map((function(t){return"".concat(t.title," | ").concat(parseFloat(t.value/(0===o?1:o)*100).toFixed(1),"%")})),datasets:[{data:a&&a.products&&a.products.map((function(t){return t.value.toLocaleString()})),backgroundColor:["#1890ff","#13c2c2","#2fc25b","#facc14","#f04864","#8543e0","#984200","#00ffee","#1fa9d8","#ffc107"],hoverBackgroundColor:["#1890ff","#13c2c2","#2fc25b","#facc14","#f04864","#8543e0","#984200","#00ffee","#1fa9d8","#ffc107"]}]},i={labels:e&&e.productTypes&&e.productTypes.map((function(t){return"".concat(t.title," | ").concat(parseFloat(t.value/(0===n?1:n)*100).toFixed(1),"%")})),datasets:[{data:e&&e.productTypes&&e.productTypes.map((function(t){return t.value.toLocaleString()})),backgroundColor:["#1890ff","#8543e0","#facc14","#2fc25b","#1fa9d8","#ffc107","#13c2c2","#f04864","#00ffee","#984200"],hoverBackgroundColor:["#1890ff","#8543e0","#facc14","#2fc25b","#1fa9d8","#ffc107","#13c2c2","#f04864","#00ffee","#984200"]}]};return y.a.createElement(l.a,{gutter:24},y.a.createElement(c.a,{md:12},y.a.createElement(f.a,{title:"Top 10 Best Selling Products",headStyle:{fontFamily:"Poppins-Medium"},bodyStyle:{},extra:y.a.createElement(h.a,{title:"Top 10 Best Selling Products"},y.a.createElement(E.a,null)),loading:a.loading},a&&a.products?y.a.createElement(B.Doughnut,{data:r,height:150,options:R}):"No Data")),y.a.createElement(c.a,{md:12},y.a.createElement(f.a,{title:"Top 10 Products Type",headStyle:{fontFamily:"Poppins-Medium"},bodyStyle:{},extra:y.a.createElement(h.a,{title:"Top 10 Products Type"},y.a.createElement(E.a,null)),loading:e.loading},e&&e.productTypes?y.a.createElement(B.Doughnut,{data:i,height:150,options:R}):"No Data")))}}]),a}(S.Component),I=a(515),j={legend:{display:!0,position:"right",labels:{boxWidth:9,usePointStyle:!0,fontFamily:"Poppins-Medium"}},cutoutPercentage:70,tooltips:{callbacks:{label:function(t,e){var a=e.datasets[t.datasetIndex],n=a._meta[Object.keys(a._meta)[0]].total,o=a.data[t.index];return o+" ("+parseFloat((o/n*100).toFixed(1))+"%)"},title:function(t,e){return e.labels[t[0].index]}}}},A=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this,e=this.props.listStatus,a=e.status,n=e.loading,o=a.statistic,r=o?Object.keys(o).filter((function(t){return"PENDING_DESIGN"===t||"PROCESSING"===t||"REFUNDED"===t||"SHIPPED"===t||"ON_HOLD"===t||"NEED_PAY"===t||"IN_PRODUCTION"===t||"CANCELED"===t||"ACTION_REQUIRED"===t})):[],i=r.map((function(t){return o[t]})).reduce((function(t,e){return t+e}),0),s={labels:r.map((function(t){return"".concat(Object(I.a)(t),":   ").concat(o[t].toLocaleString()," | ").concat(parseFloat(o[t]/(0===i?1:i)*100).toFixed(1),"%")})),datasets:[{data:r.map((function(t){return o[t]})),backgroundColor:["#1890ff","#13c2c2","#2fc25b","#facc14","#f04864","#8543e0","#984200","#00ffee","#1fa9d8","#ffc107"],hoverBackgroundColor:["#1890ff","#13c2c2","#2fc25b","#facc14","#f04864","#8543e0","#984200","#00ffee","#1fa9d8","#ffc107"]}]};return y.a.createElement(l.a,{gutter:24},y.a.createElement(c.a,{md:12},y.a.createElement(f.a,{title:"Order Status allocation",headStyle:{fontFamily:"Poppins-Medium"},bodyStyle:{},extra:y.a.createElement(h.a,{title:"Order Status allocation"},y.a.createElement(E.a,null)),loading:n},o?y.a.createElement(B.Doughnut,{ref:function(e){return t.chart=e},data:s,height:150,options:j}):"No Data")))}}]),a}(S.Component),G=a(545),Y=a.n(G),_=a(135),H=b.a.Option,J=g.a.RangePicker,U={title:{display:!1},legend:{display:!0,position:"bottom",labels:{boxWidth:7,usePointStyle:!0}},tooltips:{callbacks:{label:function(t,e){return"".concat(e.datasets[t.datasetIndex].label,": ").concat(parseFloat(t.yLabel).toLocaleString("en-GB")," ")}}},scales:{yAxes:[{ticks:{beginAtZero:!0,userCallback:function(t){return parseFloat(t).toLocaleString("en-GB")}}}],xAxes:[{ticks:{}}]}},W=function(t){var e=t.title,a=t.content,n=t.footer,o=t.tooltip,r=t.hasCurrency,l=t.className;return y.a.createElement(f.a,{title:e,extra:!!o&&y.a.createElement(h.a,{title:o},y.a.createElement(E.a,null)),bordered:!1,loading:!1,headStyle:{border:"none",padding:"0 10px"},bodyStyle:{padding:"0 10px"},style:{borderRadius:"0",borderRight:"1px solid #f0f0f0"}},y.a.createElement("span",{className:N()(w.a.text,l)},a),y.a.createElement(m.a,{style:{margin:"15px 0"}}),y.a.createElement("span",{style:{fontSize:"14px"}},"New today: ",y.a.createElement("a",{style:{cursor:"default"}},r&&"$",parseFloat(n).toLocaleString("en-GB"))))},$=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={sellerId:null,siteId:null,startDate:null,endDate:null},t.onChangeDate=function(e,a){e?t.setState({startDate:e[0],endDate:e[1]},(function(){t.onSubmit()})):t.setState({startDate:void 0,endDate:void 0},(function(){t.onSubmit()}))},t.onChangeSite=function(e){t.setState({siteId:e},(function(){t.onSubmit()}))},t.onChangeSeller=function(e){t.setState({sellerId:e},(function(){t.onSubmit()}))},t.onSubmit=function(){t.props.fetchTopProduct(t.checkParam()),t.props.fetchTopProductType(t.checkParam()),t.props.fetchStatistic(t.checkParam())},t.checkParam=function(){var e=t.state,a=e.siteId,n=e.sellerId,o=e.startDate,r=e.endDate,l={};return a&&(l.site=a),n&&(l.seller=n),o&&r&&(l.startDate="".concat(o.format("YYYY-MM-DDT00:00:00.000"),"Z"),l.endDate="".concat(r.format("YYYY-MM-DDT23:59:59.000"),"Z")),l},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=t.listSeller,a=t.fetchAllSeller,n=t.listSitesNoPaging,o=t.fetchAllSitesNoPaging,r=t.fetchStatus,l=t.fetchTopProduct,c=t.fetchTopProductType,i=t.fetchStatistic,s=t.fetchUrgentNote;r(),l(this.checkParam()),c(this.checkParam()),i(this.checkParam()),s(),0===e.sellers.length&&a(),0===n.sites.length&&o()}},{key:"render",value:function(){var t=this,e=this.props,a=e.listStatistic,n=e.listSeller,o=e.listSitesNoPaging,s=e.listStatus,u=e.topProduct,d=e.topProductType,p=e.urgentNote,m=a.statistics,g=D.get(m,"revenueProfitChart",[]).sort((function(t,e){return new Date(t.date)-new Date(e.date)})).map((function(t){return new Date(t.date).toLocaleDateString("en-GB")})),S=D.get(m,"revenueProfitChart",[]).sort((function(t,e){return new Date(t.date)-new Date(e.date)})).map((function(t){return t.profit})),O={labels:g,datasets:[{label:"Revenue",fill:!1,lineTension:.1,backgroundColor:"#1890ff",borderColor:"#1890ff",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#fff",pointBackgroundColor:"#1890ff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:D.get(m,"revenueProfitChart",[]).sort((function(t,e){return new Date(t.date)-new Date(e.date)})).map((function(t){return t.revenue}))},{label:"Profit",fill:!1,lineTension:.1,backgroundColor:"#2fc25b",borderColor:"#2fc25b",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#fff",pointBackgroundColor:"#2fc25b",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:S}]},k=n.sellers.map((function(t){return y.a.createElement(H,{key:t.id,value:t.email},t.fullName||"")})),L=o.sites.filter((function(e){return t.state.sellerId?e.email===t.state.sellerId:e})).map((function(t){return y.a.createElement(H,{key:t.id,value:t.id},"".concat(t.title," ").concat(Object(_.a)(t)))}));return y.a.createElement(y.a.Fragment,null,Array.isArray(p.note)&&p.note.length>0&&y.a.createElement(y.a.Fragment,null,y.a.createElement(i.a,{message:p.note[p.note.length-1].title||"",description:Y()(p.note[p.note.length-1].content||""),type:"info",showIcon:!0,closable:!0}),y.a.createElement("br",null)),y.a.createElement(r.a.Group,null,y.a.createElement(l.a,{gutter:24},y.a.createElement(c.a,{md:6,xs:24},y.a.createElement(J,{ranges:{Today:[F()(),F()()],Yesterday:[F()().add(-1,"days"),F()().add(-1,"days")],"Last 7 days":[F()().subtract(6,"days"),F()()],"Last 30 days":[F()().subtract(29,"days"),F()()],"This Month":[F()().startOf("month"),F()().endOf("month")],"Last Month":[F()().subtract(1,"months").startOf("month"),F()().subtract(1,"months").endOf("month")]},showTime:!!x.isMobile,format:"DD/MM/YYYY",onChange:this.onChangeDate,style:{width:"100%"}})),y.a.createElement(c.a,{md:5,xs:24},y.a.createElement(b.a,{showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"All sellers",onChange:this.onChangeSeller,optionFilterProp:"children",filterOption:function(t,e){return e.props.children.toLowerCase().indexOf(t.toLowerCase())>=0||e.props.value.toLowerCase().indexOf(t.toLowerCase())>=0}},k)),y.a.createElement(c.a,{md:5,xs:24},y.a.createElement(b.a,{showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"All sites",onChange:this.onChangeSite,optionFilterProp:"children",filterOption:function(t,e){return e.props.children.toLowerCase().indexOf(t.toLowerCase())>=0||e.props.value.toLowerCase().indexOf(t.toLowerCase())>=0}},L)))),y.a.createElement("br",null),y.a.createElement(f.a,{title:y.a.createElement("span",null,y.a.createElement(P.a,{style:{marginRight:"5px"}})," BALANCE OVERVIEW"),headStyle:{fontFamily:"Poppins-Medium"},bodyStyle:{paddingBottom:"12px"},loading:a.loading},y.a.createElement("div",{className:w.a.box},y.a.createElement("div",null,y.a.createElement(W,{className:N()("blue",w.a.text),title:y.a.createElement("span",null,y.a.createElement(v.a,null)," Order"),content:"".concat(parseFloat(D.get(m,"totalOrder",0)).toLocaleString("en-GB")),tooltip:"Total Order",footer:D.get(m,"todayTotalOrders",0)})),y.a.createElement("div",null,y.a.createElement(W,{className:N()("blue",w.a.text),title:y.a.createElement("span",null,y.a.createElement(C.a,null)," Seller"),content:"".concat(parseFloat(D.get(m,"totalSeller",0)).toLocaleString("en-GB")),tooltip:"Total Seller",footer:D.get(m,"todayTotalSeller",0)})),y.a.createElement("div",null,y.a.createElement(W,{className:N()("blue",w.a.text),title:y.a.createElement("span",null,y.a.createElement(T.a,null)," Supplier cost"),content:"$".concat(Math.abs(D.get(m,"totalRevenue",0)-D.get(m,"totalProfit",0)).toLocaleString("en-GB")),hasCurrency:!0,tooltip:"Supplier Cost = SUM OF [Supplier cost*Line item Quantity]",footer:Math.abs(D.get(m,"todayTotalRevenue",0)-D.get(m,"todayTotalProfit",0))})),y.a.createElement("div",null,y.a.createElement(W,{className:N()("orange",w.a.text),title:y.a.createElement("span",null,y.a.createElement(T.a,null)," Revenue"),content:"$".concat(parseFloat(D.get(m,"totalRevenue",0)).toLocaleString("en-GB")),hasCurrency:!0,tooltip:"Revenue =SUM OF [(Base cost - Discount + Extra Shipping Fee) * Line Item Quantity]",footer:D.get(m,"todayTotalRevenue",0)})),y.a.createElement("div",null,y.a.createElement(W,{className:N()("green",w.a.text),title:y.a.createElement("span",null,y.a.createElement(T.a,null)," Profit"),content:"$".concat(parseFloat(D.get(m,"totalProfit",0)).toLocaleString("en-GB")),hasCurrency:!0,tooltip:"Profit = Revenue - Supplier cost",footer:D.get(m,"todayTotalProfit",0)})),y.a.createElement("div",null,y.a.createElement(W,{className:N()("blue",w.a.text),title:y.a.createElement("span",null,y.a.createElement(T.a,null)," Total CusTom Transaction"),content:"$".concat(parseFloat(D.get(m,"totalCustomBalance",0)).toLocaleString("en-GB")),hasCurrency:!0,tooltip:"SUM OF [Custom transaction]",footer:D.get(m,"todayCustomBalance",0)})))),y.a.createElement("br",null),y.a.createElement(f.a,{title:"Revenue/Profit",headStyle:{fontFamily:"Poppins-Medium"},bodyStyle:{},extra:y.a.createElement(h.a,{title:"Revenue/Profit"},y.a.createElement(E.a,null))},y.a.createElement(B.Line,{data:O,height:90,options:U})),y.a.createElement("br",null),y.a.createElement(M,{topProduct:u,topProductType:d}),y.a.createElement("br",null),y.a.createElement(A,{listStatus:s}))}}]),a}(S.Component);e.default=Object(n.b)((function(t){return{listStatistic:t.toJS().dashboard.listStatistic,listSeller:t.toJS().products.listSeller,listStatus:t.toJS().dashboard.listStatus,topProduct:t.toJS().dashboard.topProduct,topProductType:t.toJS().dashboard.topProductType,listSitesNoPaging:t.toJS().sites.listSitesNoPaging,urgentNote:t.toJS().dashboard.urgentNote}}),(function(t){return{fetchStatistic:function(e){return t(o.e.fetchStatistic(e))},fetchStatus:function(){return t(o.e.fetchStatus())},fetchTopProduct:function(e){return t(o.e.fetchTopProduct(e))},fetchTopProductType:function(e){return t(o.e.fetchTopProductType(e))},fetchAllSeller:function(){return t(o.j.fetchAllSeller())},fetchAllSitesNoPaging:function(){return t(o.m.fetchAllSitesNoPaging())},fetchUrgentNote:function(){return t(o.e.fetchUrgentNote())}}}))($)}}]);
//# sourceMappingURL=29.1c6d3060.chunk.js.map