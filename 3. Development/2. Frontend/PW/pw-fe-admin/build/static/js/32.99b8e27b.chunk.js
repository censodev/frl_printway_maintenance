(this.webpackJsonppgc_admin_dev=this.webpackJsonppgc_admin_dev||[]).push([[32],{586:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},o=a(58),l=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="InboxOutlined";t.a=n.forwardRef(l)},730:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},o=a(58),l=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="ClockCircleOutlined";t.a=n.forwardRef(l)},734:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},o=a(58),l=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="PaperClipOutlined";t.a=n.forwardRef(l)},735:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},o=a(58),l=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="DownloadOutlined";t.a=n.forwardRef(l)},759:function(e,t,a){"use strict";a.r(t);var n=a(192),r=a(269),o=(a(268),a(130)),l=(a(272),a(196)),i=(a(167),a(71)),c=(a(191),a(50)),s=(a(83),a(38)),u=a(79),p=a(80),d=a(82),h=a(81),f=(a(131),a(54)),m=(a(197),a(132)),g=(a(166),a(98)),y=a(0),b=a.n(y),S=a(730),v=a(734),w=a(90),E=a(12),C=a(31),k=a.n(C),x=(a(270),a(193)),O=(a(190),a(84)),T=(a(526),a(523)),D=(a(267),a(99)),z=a(735),I=a(586),M=a(30),H=a.n(M),j=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={siteId:"",file:null,uploading:!1},e.handleImport=function(t){var a=new FormData;a.append("file",e.state.file),e.setState({uploading:!0}),H()({url:"".concat("https://app.printway.io/","pgc-service/api/order/admin/import-tracking"),method:"post",data:a,headers:{Authorization:"Bearer ".concat(localStorage.id_token),"Access-Control-Allow-Origin":"*"}}).then((function(t){e.setState({file:null,uploading:!1}),D.b.success("Import successfully."),e.props.handleCancel(),e.props.refreshTable()})).catch((function(t){e.setState({uploading:!1}),D.b.error("Import failed!")}))},e.onChangeSite=function(t){e.setState({siteId:t})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.state.uploading,a=this.props,n=a.visible,r=a.handleCancel,o={onRemove:function(t){e.setState({file:null})},beforeUpload:function(t){return e.setState({file:t}),!1}},l=T.a.Dragger;return b.a.createElement(b.a.Fragment,null,b.a.createElement(x.a,{title:b.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},b.a.createElement("div",null,b.a.createElement(z.a,{style:{marginRight:"8px"}}),"Import Tracking")),visible:n,onOk:function(){return e.btnRef.click()},confirmLoading:t,onCancel:r,okText:"Import",destroyOnClose:!0,closable:!1},b.a.createElement(O.a,{layout:"vertical",onFinish:this.handleImport},b.a.createElement(s.a,{htmlType:"submit",style:{display:"none"},ref:function(t){return e.btnRef=t}},"Submit"),b.a.createElement(l,Object.assign({},o,{style:{marginTop:"16px"}}),b.a.createElement("p",{className:"ant-upload-drag-icon"},b.a.createElement(I.a,null)),b.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload")))))}}]),a}(y.Component),L=(g.a.Search,m.a.RangePicker),Y=f.a.Option,A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentPage:0,pageSize:10,keyword:"",startDate:null,endDate:null,supplier:void 0,openModalImportTracking:!1},e.checkParam=function(){var t=e.state,a=t.currentPage,n=t.pageSize,r=t.sortedInfo,o=t.keyword,l=t.startDate,i=t.endDate,c=t.supplier,s={};return r&&r.order&&r.columnKey&&(s.sort="".concat(r.columnKey,",").concat(r.order)),o&&(s.keyword=o),l&&i&&(s.startDate=l,s.endDate=i),c&&(s.supplierId=c),s.page=a,s.size=n,s},e.refreshTable=function(){e.setState({currentPage:0},(function(){return e.props.fetchExportHistory(e.checkParam())}))},e.onSearch=function(){e.refreshTable()},e.debounceSearch=E.debounce((function(t){e.setState({keyword:t.trim()},(function(){1!==t.length&&e.refreshTable()}))}),300),e.onChangeKeyWord=function(t){e.debounceSearch(t.target.value)},e.onShowSizeChange=function(t,a){e.setState({pageSize:a},e.refreshTable)},e.onChangeDate=function(t){t?e.setState({startDate:"".concat(t[0].format("YYYY-MM-DDT00:00:00.000"),"Z"),endDate:"".concat(t[1].format("YYYY-MM-DDT23:59:59.000"),"Z")},e.refreshTable):e.setState({startDate:null,endDate:null},e.refreshTable)},e.onChangeSupplier=function(t){e.setState({supplier:t},e.refreshTable)},e.handleTableChange=function(t,a,n){e.setState({currentPage:t.current-1},(function(){return e.props.fetchExportHistory(e.checkParam())}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchExportHistory(this.checkParam()),this.props.getAllSupplier()}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentPage,n=t.pageSize,r=t.openModalImportTracking,u=this.props,p=u.exportHistory,d=u.listSuppliers,h=p.listExportHistory,m=p.loading,y=p.totalElements,E=d.suppliers;return b.a.createElement(b.a.Fragment,null,b.a.createElement(o.a,{title:b.a.createElement("span",null,b.a.createElement(S.a,{style:{marginRight:"5px"}})," EXPORT HISTORY"),headStyle:{color:"rgba(0, 0, 0, 0.45)"},bodyStyle:{paddingBottom:"12px"},extra:b.a.createElement(s.a,{type:"primary",onClick:function(){return e.setState({openModalImportTracking:!0})},size:w.isMobile?"small":"middle"},"Import Tracking")},b.a.createElement(g.a.Group,null,b.a.createElement(i.a,{gutter:24},b.a.createElement(c.a,{md:4,xs:24},b.a.createElement(f.a,{showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"Supplier",onChange:this.onChangeSupplier,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0||t.props.value.toLowerCase().indexOf(e.toLowerCase())>=0}},Array.isArray(E)&&E.map((function(e,t){return b.a.createElement(Y,{key:t,value:e.id,children:e.firstName+" "+e.lastName})})))),b.a.createElement(c.a,{md:4,xs:24},b.a.createElement(L,{ranges:{Today:[k()(),k()()],Yesterday:[k()().add(-1,"days"),k()().add(-1,"days")],"Last 7 days":[k()().subtract(6,"days"),k()()],"Last 30 days":[k()().subtract(29,"days"),k()()],"This Month":[k()().startOf("month"),k()().endOf("month")],"Last Month":[k()().subtract(1,"months").startOf("month"),k()().subtract(1,"months").endOf("month")]},showTime:!!w.isMobile,format:"DD/MM/YYYY",onChange:this.onChangeDate,style:{width:"100%"}})))),b.a.createElement("br",null),b.a.createElement(l.a,{rowKey:function(e){return e.id},columns:[{title:"Supplier",dataIndex:"supplierName",key:"supplierName"},{title:"FileName",dataIndex:"title",key:"title"},{title:"Created At",dataIndex:"createdDate",key:"createdDate",render:function(e){return new Date(e).toLocaleString("en-GB")}},{title:"Action",render:function(e,t){return b.a.createElement(s.a,{href:t.url,style:{padding:0},type:"link",children:b.a.createElement(b.a.Fragment,null," ",b.a.createElement(v.a,null)," Download ")})}}],dataSource:h,pagination:{current:a+1,pageSize:n,total:y,showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,showLessItems:!0,showQuickJumper:!0,showTotal:function(e){return"Total ".concat(e," orders")}},loading:m,showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.handleTableChange}),b.a.createElement(j,{visible:r,handleCancel:function(){return e.setState({openModalImportTracking:!1})},refreshTable:this.refreshTable})))}}]),a}(y.Component);t.default=Object(n.b)((function(e){return{exportHistory:e.toJS().exportHistory.exportHistory,listSuppliers:e.toJS().orders.listSuppliers}}),(function(e){return{fetchExportHistory:function(t){e(r.f.fetchExportHistory(t))},getAllSupplier:function(){e(r.h.getAllSupplier())}}}))(A)}}]);
//# sourceMappingURL=32.99b8e27b.chunk.js.map